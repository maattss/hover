fragment basicUserFragment on users {
  id
  email
  name
  picture
  bio
}

fragment userFragment on users {
  ...basicUserFragment
  followers {
    follower {
      ...basicUserFragment
    }
  }
  followers_aggregate {
    aggregate {
      count(distinct: true, columns: user_id)
    }
  }
  following {
    user {
      ...basicUserFragment
    }
  }
  activities {
    ...activityFragment
  }
}

fragment basicActivityFragment on activities {
  activity_id
  caption
  duration
  geofence_id
  score
  started_at
  stopped_at
}

fragment activityFragment on activities {
  activity_id
  caption
  created_at
  comments {
    ...commentFragment
  }
  geofence {
    ...geofenceFragment
  }
}

fragment commentFragment on comments {
  comment_id
  activity_id
  content
  user {
    ...basicUserFragment
  }
}

fragment geofenceFragment on geofences {
  id
  name
  category
  coordinates
  description
  latitude
  longitude
  radius
  variant
}

fragment challengeFragment on challenge {
  id
  challenge_type
  created_at
  start_date
  end_date
  state
  rules
}

fragment achievementFragment on achievement {
  description
  name
  achievement_type
  level
  created_at
  rule
}
